{% extends "BFSiteBundle::base.html.twig" %}

{% block title %}
  Home page - {{ parent() }}
{% endblock %}


{% block content %}
	<section class="background text-center" style="background-color:green;">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-4 col-sm-4 col-md-3 col-lg-3 row">
          </br>
        
            <div class="challengetitle text-center row">
                <h3 style="color:white;">{{ app.user.username }}</h3>
            </div>
            <div class="videotabback" style="min-height:210px;">
              <div class="challengecontent row" style="margin: 0px 10px; margin-bottom:10px;">
                <h2 class="text-center">{{ rank.rankinfo.level }}</h2>
                <p>{{ user.points }} Points</p>
                <div class="progress class="text-center"">
                  <div class="progress-bar {{ rank.rankinfo.style }} progress-bar-striped active" role="progressbar" aria-valuenow="{{ user.points }}" aria-valuemin="{{ rank.rankinfo.min }}" aria-valuemax="{{rank.rankinfo.max }}" style="width:{{ rank.rankinfo.percent }}%;">
                  </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 row">
                  <h3 class="text-center">Ranking</h3>
                  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 row">
                    <img src="../img/globe.png" alt="globe ranking" style="width:25px;"/><!--globe -->
                  </div><!--
                  --><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 row">
                    <p> {{ rank.rankinfo.globalrank }}</p>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 row"><!--country -->
                    {% if app.user.country.name == 'France' %}
                      <img src="/img/fr.jpg" alt="" style="width:25px;"/>
                    {% elseif app.user.country.name == 'United States' %}
                      <img src="/img/usa.jpg" alt="" style="width:25px;"/>
                    {% elseif app.user.country.name == 'Belgium' %}
                      <img src="/img/be.jpg" alt="" style="width:25px;"/>
                    {% endif %}
                     
                  </div><!--
                  --><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 row">
                    <p> {{ rank.rankinfo.countryrank }} </p>
                  </div>
                  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 row">
                    <p>{{ app.user.state.name }} <!--State -->
                  </div><!--
                  --><div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 row">
                    <p> {{ rank.rankinfo.staterank }} </p>
                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 row text-center" style="margin-bottom:10px;">
                    <h3>Duel Ranking</h3>
                    {% if rank.duelrankinfo.level == 1 %}
                      <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xs-offset-4 col-sm-offset-4 col-md-offset-4 col-lg-offset-4  row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                    {% elseif rank.duelrankinfo.level == 2 %}
                      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xs-offset-3 col-sm-offset-3 col-md-offset-3 col-lg-offset-3 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                    {% elseif rank.duelrankinfo.level == 3 %}
                      <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                      <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                      <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                    {% elseif rank.duelrankinfo.level == 4 %}
                      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                      <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 row">
                        <img src="/img/duelrank.jpg" alt="duel ranking indicator on bestfootball" style="width:100%"/>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
              </div>
            </div>

        <div class="col-xs-5 col-sm-5 col-md-7 col-lg-7 row">
          {% for object in listVideos %}

              {% if object.type == 'freestyle' %}
                <div class="well row" style="margin-bottom:10px;">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 row">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-2 vcenter row">
                      <img src="/uploads/img/{{ object.user.picture.src }}" alt="{{ object.user.picture.src }}" style="width:100%" id="{{ object.user.username }}">
                    </div><!--
                 --><div class="col-xs-8 col-sm-8 col-md-8 col-lg-10 vcenter row">
                      <a class="username" data-username="{{ object.user.username }}" href="{{ path('bf_site_profile', { 'username': object.user.username }) }}">{{ object.user.username }}</a>
                      
                    </div>
                  </div>
                  <p>{{ object.title }}</p>
                  <video width="100%" id="video" controls>
                    <source src="/uploads/videos/{{ object.id}}.{{ object.source }}" type="video/mp4">
                      Your browser does not support the video tag.
                  </video>
                  <a href="{{ path('bf_site_video_report', {'id': object.id}) }}">report this video</a>



                </div>
              {% elseif object.type == 'challenge' %}
                <div class="well row" style="margin-bottom:10px;">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 row">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-2 vcenter row">
                      <img src="/uploads/img/{{ object.user.picture.src }}" alt="{{ object.user.picture.src }}" style="width:100%" id="{{ object.user.username }}">
                    </div><!--
                 --><div class="col-xs-8 col-sm-8 col-md-8 col-lg-10 vcenter row">
                      <a class="username" rel="popover" data-username="{{ object.user.username }}" href="{{ path('bf_site_profile', { 'username': object.user.username }) }}">{{ object.user.username }}</a>
                    </div>
                  </div>
                  <p>{{ object.title }} to the {{ object.challenge.title }} challenge.</p>
                  <video width="100%" id="video" controls>
                    <source src="/uploads/videos/{{ object.id}}.{{ object.source }}" type="video/mp4">
                      Your browser does not support the video tag.
                  </video>
                  <a href="{{ path('bf_site_video_report', {'id': object.id}) }}">report this video</a>
                </div>



              {% elseif object.type == 'duel' %}
                <div class="well row" style="margin-bottom:10px;">
                  {{ object.host }} against {{ object.guest }}
                </div>
              {% endif %}

          {% endfor %} 

        </div>
        <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 row">
          Advertisements
        </div> 
      </div>
    </div>
  </section>


{% endblock %}

{% block javascripts %}
<script type="text/javascript">





 
$( document ).ready(function() {

var timer;
$("[rel=popover]").hover(function() {
    var e=$(this);

    timer = setTimeout(function(){
      console.log('begin ajax');
                var username = e.data('username');
                  $.ajax({
                    type: "POST",
                    url: "{{ path('bf_site_api_userinfo')}}",
                    data: 'username=' + username,
                    cache: false,
                      success: function(code_html, statut){
                        e.popover({
                          html: true, content : code_html}).popover('toggle');
                      }
                    });
              
    
    }, 1500);
}).mouseleave(function() {
    clearTimeout(timer);
    $("[rel=popover]").popover('hide');
});






});



</script>

{% endblock %}
