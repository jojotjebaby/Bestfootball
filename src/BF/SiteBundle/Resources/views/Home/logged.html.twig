{% extends "BFSiteBundle::base.html.twig" %}

{% block title %}
  Home page - {{ parent() }}
{% endblock %}


{% block content %}
	<section class="background text-center" style="background-color:green;">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-4 col-sm-4 col-md-3 col-lg-3 row">
          </br>
        
            <div class="challengetitle text-center row">
                <h3 style="color:white;">{{ app.user.username }}</h3>
            </div>
              {% include "BFSiteBundle:Userinfo:Userinfo.html.twig" with {"user": user, "rank": rank} only %}
          </div>

        <div class="col-xs-5 col-sm-5 col-md-7 col-lg-7 row">
          {% for object in listVideos %}

              {% if object.type == 'freestyle' %}
                <div class="well row" style="margin-bottom:10px;">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 row">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-2 vcenter row">
                      <img src="{{ object.user.picture.src }}" alt="{{ object.user.picture.src }}" style="width:100%" id="{{ object.user.username }}">
                    </div><!--
                 --><div class="col-xs-8 col-sm-8 col-md-8 col-lg-10 vcenter row">
                      <a class="username" data-username="{{ object.user.username }}" href="{{ path('bf_site_profile', { 'username': object.user.username }) }}">{{ object.user.username }}</a>
                      
                    </div>
                  </div>
                  <p>{{ object.title }}</p>
                  <video width="100%" id="video" controls>
                    <source src="/uploads/videos/{{ object.id}}.{{ object.source }}" type="video/mp4">
                      Your browser does not support the video tag.
                  </video>
                  <a href="{{ path('bf_site_video_report', {'id': object.id}) }}">report this video</a>



                </div>
              {% elseif object.type == 'challenge' %}
                <div class="well row" style="margin-bottom:10px;">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 row">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-2 vcenter row">
                      <img src="{{ object.user.picture.src }}" alt="{{ object.user.picture.src }}" style="width:100%" id="{{ object.user.username }}">
                    </div><!--
                 --><div class="col-xs-8 col-sm-8 col-md-8 col-lg-10 vcenter row">
                      <a class="username" rel="popover" data-username="{{ object.user.username }}" href="{{ path('bf_site_profile', { 'username': object.user.username }) }}">{{ object.user.username }}</a>
                    </div>
                  </div>
                  <p>{{ object.title }} to the {{ object.challenge.title }} challenge.</p>
                  <video width="100%" id="video" controls>
                    <source src="/uploads/videos/{{ object.id}}.{{ object.source }}" type="video/mp4">
                      Your browser does not support the video tag.
                  </video>
                  <a href="{{ path('bf_site_video_report', {'id': object.id}) }}">report this video</a>
                </div>



              {% elseif object.type == 'duel' %}
                <div class="well row" style="margin-bottom:10px;">
                  {{ object.host }} against {{ object.guest }}
                </div>
              {% endif %}

          {% endfor %} 

        </div>
        <div class="col-xs-3 col-sm-3 col-md-2 col-lg-2 row">
          Advertisements
        </div> 
      </div>
    </div>
  </section>


{% endblock %}

{% block javascripts %}
<script type="text/javascript">





 
$( document ).ready(function() {

var timer;
$("[rel=popover]").hover(function() {
        var e=$(this);
        timer = setTimeout(function(){
        var username = e.data('username');
        $.ajax({
          type: "POST",
          url: "{{ path('bf_site_api_userinfo')}}",
          data: 'username=' + username,
          cache: false,
            success: function(code_html, statut){
              e.popover({
                html: true, content : code_html
              }).popover('toggle');
            }
        });       
      }, 1500);
    }).mouseleave(function() {
      clearTimeout(timer);
      $("[rel=popover]").popover('hide');
  });
});



</script>

{% endblock %}
